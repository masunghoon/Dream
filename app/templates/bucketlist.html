{% extends "base.html" %}

{% block content %}
<h1>{{g.user.username}}'s Bucket Lists</h1>
{% include 'flash.html' %}
<div id="main" class="well">
    <table class="table table-striped">
        <tr><td style="width: 1px;"></td><td><b>Task</b></td><td><b>Options</b></td></tr>
        <!-- ko foreach: tasks -->
        <tr>
            <td>
                <span data-bind="visible: done" class="label label-success">Done</span>
                <span data-bind="visible: !done()" class="label label-danger">In Progress</span>
            </td>
            <td><p><b data-bind="text: title"></b></p><p data-bind="text: description"></p></td>
            <td>
                <button data-bind="click: $parent.beginEdit" class="btn btn-default btn-sm">Edit</button>
                <button data-bind="click: $parent.remove" class="btn btn-default btn-sm">Delete</button>
                <span data-bind="visible: done">
                    <button data-bind="click: $parent.markInProgress" class="btn btn-default btn-sm">Mark In Progress</button>
                </span>
                <span data-bind="visible: !done()">
                    <button data-bind="click: $parent.markDone" class="btn btn-default btn-sm">Mark Done</button>
                </span>
            </td>
        </tr>
        <!-- /ko -->
    </table>
    <button data-bind="click: beginAdd" class="btn btn-primary">Add Task</button>
</div>
{% endblock %}
{% block scripts %}
        var tasksViewModel = new TasksViewModel();
        ko.applyBindings(new TasksViewModel(), $('#main')[0]);
{% endblock %}